# 2020년 3월 2일

### 웹서버와 웹애플리케이션서버
1. 웹서버
- 정적인 컨텐츠 (아파치, 엔진엑스)
- WAS가 해야 할 일의 부담을 줄이기 위해 기능을 분배함 (웹 서버에서는 정적인 문서만 처리하도록 하고, WAS는 애플리케이션의 로직만 수행하도록)
- WAS의 환경설정 파일을 외부에 노출시키지 않도록 하기 위해 사용

2. 웹애플리케이션서버
- DB 조회 또는 로직 처리 (톰캣, 제우스)
- Web Server + CGI가 WAS


### CGI란
1. CGI(Common Gateway Interface)
- 웹서버에서 정적인 컨텐츠가 아닌 동적인 컨텐츠를 사용자에게 제공하기 위한 인터페이스
- 특정 플랫폼에 의존하지 않고, 웹 서버로부터 외부 프로그램을 호출하는 방식을 정의
- 데이터 처리 요청이 있을 때마다 매번 프로세스를 생성하여 처리 (성능과 확장성의 한계)

2. FastCGI 
- 개선된 CGI
- 백그라운드 프로세스를 계속 돌려놓는 방식. 몇 개의 프로세스가 종료되지 않고 처리를 위해 계속 상주함.
- 웹서버와 분리되기 때문에 안정적이고 어떤 언어로든 구현할 수 있음
- 요청마다 프로세스를 생성하는 기존의 방식이 아니기에 성능면에서도 뛰어남

3. mod-python처럼 웹서버에 내장 인터프리터로 동작하는 방식
- 내장된 언어를 웹서버가 해석 가능
- 기존 CGI 방식보다 빠름
- 파이썬 인터프리터가 캐싱을 사용하여 파일 내용 바뀌면 서버 재시작 필요
- 특정 버전의 모듈에 의존적이라 버전을 옮길 때 재컴파일 필요


### WSGI란
- 웹서버와 파이썬 애플리케이션 간 표준화된 통신 인터페이스 정의
- 많은 request들을 다룰 수 있도록 설계됨
- 파이썬 웹개발 속도를 올려줌
- ex) flup, gunicorn, uwsgi 등


### WSGI의 필요성
- 웹서버의 선택과 프레임워크 선택을 분리할 수 있게 함.
- 기존 웹서버가 호출하는 프로그램으로 Python을 사용하기 어려워서 (웹서버 종속적/특별한 설정 필요) 등장


### nginx
- 더 적은 자원으로 더 빠르게 서비스 (이유: Apache보다 동작이 단순하고, 전달자 역할만 수행)
- 동시접속 처리에 특화된 웹 서버 프로그램
- 비동기 이벤트 드리븐 구조 (<-> 스레드/프로세스 구조 "아파치")
- 마스터프로세스 1 & 워커프로세스 多
- 역할: 정적 파일을 처리하는 HTTP서버 + 응용프로그램 서버에 요청을 보내는 reverse proxy
- 장점: 보안 + 백엔드 서비스 장애 대응
