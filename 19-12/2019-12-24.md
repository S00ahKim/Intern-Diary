# 2019년 12월 24일

### ubuntu
- 리눅스 커널 기반 리눅스 배포판의 일종
- 설치와 유지보수가 간편
- 사용자 친화적


### 리눅스
- 커널의 일종인 리눅스 커널, 또는 리눅스 커널을 사용하는 운영 체제
- Unix 계열 운영체제
- 리눅스는 커널에 개별적으로 설계하여 하드웨어 성능이 구려도 사용 가능


### 유닉스
- 유닉스(Unix)는 대부분의 현대적 컴퓨터 운영 체제의 원형이 된 OS


### 커널?
- 운영 체제(OS)의 심장이자 OS를 규정짓는 매우 중요한 부분. 
- 맨 하부에서 돌음
- 자원 분배, 태스크 매니저, 프로세스 제어, 메모리 제어, 시스템 콜 수행 등
- OS는 커널 위에 레이어를 올리는 형식


### 도커
- CentOS와 우분투는 "운영체제"고, 도커는 윈도 포함 그런 OS에 설치하는 컨테이너 도구 프로젝트. 도커로 우분투를 설치하거나 우분투에 도커를 설치할 수 있음. 그러나 도커==우분투 이건 아님!!
- 컨테이너 기반 가상화 도구
- 계층화된 파일시스템(AUFS, BTRFS 등)을 사용해 가상화된 컨테이너의 변경사항을 모두 추적하고 관리
- VM의 단점 극복, 장점 극대화한 최적화가 진행되면서 나온 앱
- 운영체제를 통째로 가상화하는 것과 다름
- 시스템과 서비스에 필요한 코드를 모아둔 최소한의 단위를 <<이미지>>라고 함. 이미지는 불변, 이미지에서 파생된 컨테이너가 있다면 이미지 삭제 불가 (컨테이너 종료와 삭제가 먼저 이뤄져야)
- 실행에 필요한 시스템과 서비스를 운영하는데 필요한 단위를 <<컨테이너>>라고 함. 컨테이너는 변경가능. 특정한 이미지로부터 생성된 컨테이너에 어떤 변경사항을 더하고, 이 변경된 상태를 이미지로 만들어내는 것이 가능
- 컨테이너는 이미지를 기반으로 운영
- 도커의 이미지는 도커가 설치된 곳이라면 어디서든 컨테이너로 작동시킬 수 있다
- 도커파일은 특정 서버를 설치하고 실행하는 명령어로 구성
- 도커 빌드 명령어로 이미지를 만듦
- 도커파일 내 RUN 하나하나는 이미지가 됨
- -t로 이름과 태그 지정시 그에 맞는 최종 이미지 나옴
- 도커 런 -it : -i와 -t를 동시에 사용한 것으로 터미널 입력을 위한 옵션
- -it 옵션을 삭제하면 컨테이너를 데몬 형태로 사용할 수 있다고 함
- 도커 컴포즈 실행 >> docker-compose up
- docker-compose를 백그라운드에서 실행하는 방법은 -d 옵션을 사용
- 중지하는 방법은 docker-compose down
- 한  docker-compose.yml 안에 있는 서비스들은 별도로 지정하지 않으면 하나의 네트워크에 속함
- 반드시 데이터베이스 컨테이너를 실행한 다음에 앱 컨테이너를 실행해야 합니다. 
  그렇지 않으면 앱 컨테이너에서 데이터베이스 컨테이너를 찾을 수 없기 때문이죠.


### 왜 도커가 필요한가?
- 여러 서버마다 상태와 환경이 다른 "눈송이 서버" => 얘들 관리해주려고 서버 운영기록 코드화 ex. 도커파일
- 도커 파일 = 서버 운영 기록 코드화
- 도커 이미지 = 도커 파일 + 실행 시점
- 도커 컨테이너 == 도커 이미지 + 환경 변수
- 실행 시점에 상관 없이 구성 시점을 고정할 수 있음 (실행 시간의 차이가 없게 됨)
- 테스트 주도 개발과 같이 일단 실패해보면서 실패 없는 환경을 만들 수 있게 됨
- 한 도커 이미지로 생성할 수 있는 컨테이너 갯수에도 제한이 없다


### 데몬으로 실행
- 데몬은 항상 돌아가는 거
- 즉 백그라운드로 항상 돌아가게 만들라는 것
- 부팅시에 자동으로 실행됨
- 프로그램 종료에 cntrl C나 Z가 안 먹힌다.